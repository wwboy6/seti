import{d as P,c as S,r as g,o as J,w as j,a as d,b as o,e as _,F as b,f as y,n as q,t as k,v as G,g as H,h as K,i as v,j as C,_ as Q}from"./index-N6Rmhys7.js";const U={class:"simulation-container"},Y={class:"sector-rotation-inputs"},W=["value","onInput","data-sector-rotation-idx"],X=["value","onInput","data-rotation-idx"],Z={class:"spin-row"},tt={class:"solar-stack"},et=["src","alt"],nt=["src"],ot=["src"],st={class:"button-rows"},at={class:"button-row"},lt={class:"button-row"},it={class:"button-row"},I="seti-simulation-state-v1",rt=P({__name:"SimulationView",setup(ut){const p=S(()=>{const n=s.value%3;return n===1?"small":n===2?"middle":"large"}),x=S(()=>p.value==="small"?"small":p.value==="middle"?"middle":"large"),N=S(()=>p.value==="small"?"spin-label-small":p.value==="middle"?"spin-label-middle":"spin-label-large"),m=g(!1),s=g(1);function R(){for(let t=1;t<=3;t++)i.value[t]=Math.floor(Math.random()*8);const n=Math.floor(Math.random()*2);for(let t=0;t<4;t++)r.value[t]=n+t*2;r.value=r.value.map(t=>({value:t,sort:Math.random()})).sort((t,e)=>t.sort-e.sort).map(({value:t})=>t),s.value=1}function $(){const n=s.value%3;a(n===1?[3]:n===2?[2,3]:[1,2,3],1),s.value++}function A(){if(s.value<=1)return;s.value--;const n=s.value%3;a(n===1?[3]:n===2?[2,3]:[1,2,3],-1)}function c(n){return(n%8+8)%8}function a(n,t){n.forEach(e=>{i.value[e]=c(i.value[e]+t)})}function M(n){const t=document.activeElement;if(!t)return;const e=Number(t.getAttribute("data-rotation-idx"));if(isNaN(e))return;const u=(n.clipboardData?.getData("text")||"").split(/\s+/).filter(Boolean);u.length<2||(console.warn("Pasting values:",u,"at index:",e),n.preventDefault(),u.forEach((f,w)=>{const h=parseInt(f,10);!isNaN(h)&&e+w<=3&&(i.value[e+w]=c(h))}),K(()=>{const f=document.querySelectorAll(".rotation-label input");f[e+u.length-1]&&f[e+u.length-1].focus()}))}const D=["wheel4.png","wheel3.png","wheel2.png","wheel1.png","sun.png"],i=g([0,0,0,0,0]),E=[0,3,2,5,0];function T(n,t){const e=parseInt(n.target.value,10);i.value[t]=c(e)}function B(n){return{transform:`rotate(${c(i.value[n]+E[n])*-45}deg)`}}const z=["sector1","sector2","sector3","sector4"],r=g([0,2,4,6]);function L(){const n={rotations:i.value,sectorRotations:r.value,spinNumber:s.value};localStorage.setItem(I,JSON.stringify(n))}function O(){const n=localStorage.getItem(I);if(n)try{const t=JSON.parse(n);Array.isArray(t.rotations)&&t.rotations.length===5&&(i.value=t.rotations.slice()),Array.isArray(t.sectorRotations)&&t.sectorRotations.length===4&&(r.value=t.sectorRotations.slice()),typeof t.spinNumber=="number"&&(s.value=t.spinNumber)}catch(t){console.error("Failed to load simulation state:",t),console.warn("Save data:",n)}}J(()=>{O()}),j([i,r,s],L,{deep:!0});function V(n){return{transform:`rotate(${c(r.value[n])*-45}deg) translate(0,-385px)`}}function F(n,t){const e=parseInt(n.target.value,10);r.value[t]=c(e)}return(n,t)=>(v(),d("div",U,[t[10]||(t[10]=o("h2",null,"Solar Simulation",-1)),o("div",Y,[t[8]||(t[8]=o("span",null,"Sector",-1)),(v(!0),d(b,null,y(r.value,(e,l)=>(v(),d("label",{key:l,class:"rotation-label"},[o("input",{type:"number",value:r.value[l],onInput:u=>F(u,l),"data-sector-rotation-idx":l},null,40,W)]))),128))]),o("div",{class:"rotation-inputs",onPaste:M},[t[9]||(t[9]=o("span",null,"Planet",-1)),(v(),d(b,null,y(3,e=>o("label",{key:e,class:"rotation-label"},[o("input",{type:"number",value:i.value[e],onInput:l=>T(l,e),"data-rotation-idx":e},null,40,X)])),64)),o("button",{class:"random-btn",onClick:R},"random")],32),o("div",Z,[o("span",{class:q(["spin-label",N.value])},k(x.value),3),_(o("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),min:"1",class:"spin-input",placeholder:"spin number",style:{width:"3rem","margin-right":"0.5rem"}},null,512),[[G,s.value,void 0,{number:!0}]]),o("button",{class:"spin-button",onClick:$},"+spin"),o("button",{class:"spin-button",onClick:A},"-spin")]),o("div",tt,[(v(),d(b,null,y(D,(e,l)=>o("img",{key:e,src:`/seti/img/${e}`,alt:e,class:"solar-image wheel",style:C(B(l))},null,12,et)),64)),(v(),d(b,null,y(z,(e,l)=>o("div",{key:e,class:"solar-image",style:C(V(l))},[o("img",{class:"sector-name",src:`/seti/img/${e}-name.png`},null,8,nt),o("img",{src:`/seti/img/${e}.png`},null,8,ot)],4)),64))]),o("button",{class:"toggle-btn",onClick:t[1]||(t[1]=e=>m.value=!m.value)},k(m.value?"Hide":"Show")+" Quick Controls ",1),_(o("div",st,[o("div",at,[o("button",{onClick:t[2]||(t[2]=e=>a([3],1))},"+small"),o("button",{onClick:t[3]||(t[3]=e=>a([3],-1))},"-small")]),o("div",lt,[o("button",{onClick:t[4]||(t[4]=e=>a([2,3],1))},"+middle"),o("button",{onClick:t[5]||(t[5]=e=>a([2,3],-1))},"-middle")]),o("div",it,[o("button",{onClick:t[6]||(t[6]=e=>a([1,2,3],1))},"+large"),o("button",{onClick:t[7]||(t[7]=e=>a([1,2,3],-1))},"-large")])],512),[[H,m.value]])]))}}),dt=Q(rt,[["__scopeId","data-v-28e179a2"]]);export{dt as default};
